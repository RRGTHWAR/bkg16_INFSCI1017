package bkg16_Music;

import java.util.UUID;

import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.Persistence;

public class SongManager {
	public void createSong(String songID, String title) {
		EntityManagerFactory emFactory =
				Persistence.createEntityManagerFactory("bkg16_MusicSong");
		
		EntityManager em = emFactory.createEntityManager();
		
		em.getTransaction().begin();
		Song s = new Song();
		
		s.setSongID(UUID.randomUUID().toString());
		s.setTitle(title);
		
		//Add song object to ORM object grid
		em.persist(s);
		
		//Commit transaction
		em.getTransaction().commit();
		
		//Close connection to persistence manager
		em.close();
		emFactory.close();
		
	}


	public void updateSong(String songID, String title) {
		EntityManagerFactory emFactory = Persistence.createEntityManagerFactory("bkg16_MusicSong");
		EntityManager em = emFactory.createEntityManager();
		em.getTransaction().begin();
		
		Song s = em.find(Song.class, "c6f77b3d-0f14-47e0-9630-c2ac941e22c6");
		
		if(!title.equals("")) {
			s.setTitle(title);
		}
	}
	
}